<h1 id="tdd-testing-guide">TDD Testing Guide</h1>
<p>This guide explains how to run the Test-Driven Development (TDD) tests for each assignment and how to read and understand the test files in the <code>tdd/</code> folder.</p>
<h2 id="what-are-tdd-tests-">What are TDD Tests?</h2>
<p>The TDD (Test-Driven Development) tests are automated tests provided by the course to verify that your assignment solutions are correct. These tests are located in the <code>tdd/</code> folder and check that your code:</p>
<ul>
<li>Produces the correct output</li>
<li>Follows the specified requirements</li>
<li>Handles edge cases properly</li>
<li>Uses the correct file structure and naming conventions</li>
</ul>
<p><strong>Important</strong>: These tests are different from the tests you&#39;ll write in Assignment 9. The TDD tests are provided by the course to validate your work. In Assignment 9, you&#39;ll write your own tests.</p>
<hr>
<h2 id="running-tdd-tests">Running TDD Tests</h2>
<h3 id="general-command-format">General Command Format</h3>
<p>Most assignments use the following command format:</p>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignmentX</span>
</code></pre>
<p>Replace <code>X</code> with the assignment number (e.g., <code>assignment1</code>, <code>assignment2</code>, etc.).</p>
<h3 id="running-tests-for-specific-assignments">Running Tests for Specific Assignments</h3>
<h4 id="-assignment-1-node-js-fundamentals-"><strong>Assignment 1</strong> (Node.js Fundamentals)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment1</span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li><code>globals-demo.js</code> outputs correct global variables</li>
<li><code>async-demo.js</code> demonstrates async patterns correctly</li>
<li><code>core-modules-demo.js</code> uses Node.js core modules properly</li>
</ul>
<h4 id="-assignment-2-events-http-express-"><strong>Assignment 2</strong> (Events, HTTP, Express)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment2</span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li>Event emitter and listener functionality</li>
<li>HTTP server endpoints</li>
<li>Express application setup</li>
</ul>
<h4 id="-assignment-3-middleware-"><strong>Assignment 3</strong> (Middleware)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment3a    <span class="hljs-comment"># For first part</span>
</span>npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment3b    <span class="hljs-comment"># For second part</span>
</span>npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment3     <span class="hljs-comment"># For complete assignment</span></span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li>Route handlers work correctly</li>
<li>Middleware is properly implemented</li>
<li>Error handling functions correctly</li>
</ul>
<h4 id="-assignment-4-tasks-and-validations-"><strong>Assignment 4</strong> (Tasks and Validations)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment4</span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li>User registration, login, and logoff</li>
<li>Task CRUD operations</li>
<li>Validation schemas work correctly</li>
</ul>
<h4 id="-assignment-5-sql-introduction-"><strong>Assignment 5</strong> (SQL Introduction)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment5</span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li>SQL queries are correctly formatted</li>
<li>Database concepts are understood</li>
</ul>
<h4 id="-assignment-6-postgresql-and-prisma-"><strong>Assignment 6</strong> (PostgreSQL and Prisma)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment6a    <span class="hljs-comment"># For PostgreSQL part</span>
</span>npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment6b    <span class="hljs-comment"># For Prisma part</span></span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li>Database connections work</li>
<li>Database queries execute correctly</li>
<li>Prisma setup and migrations</li>
</ul>
<h4 id="-assignment-7-prisma-advanced-"><strong>Assignment 7</strong> (Prisma Advanced)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment7</span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li>Advanced Prisma queries</li>
<li>Database relationships</li>
<li>Analytics endpoints</li>
</ul>
<h4 id="-assignment-8-authentication-"><strong>Assignment 8</strong> (Authentication)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment8</span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li>JWT authentication works</li>
<li>Protected routes are secured</li>
<li>User authentication flow</li>
</ul>
<h4 id="-assignment-9-testing-"><strong>Assignment 9</strong> (Testing)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> lesson9TDD</span>
</code></pre>
<p><strong>Note</strong>: Assignment 9 is different! This command runs tests that validate <em>your own test files</em>. It uses mock versions of your code with intentional bugs to check if your tests catch them.</p>
<h4 id="-assignment-10-deployment-"><strong>Assignment 10</strong> (Deployment)</h4>
<pre><code class="lang-bash">npm <span class="hljs-keyword">run</span><span class="bash"> tdd assignment10</span>
</code></pre>
<p>Tests verify:</p>
<ul>
<li>Deployment configuration</li>
<li>Environment variables</li>
<li>Production-ready code</li>
</ul>
<hr>
<h2 id="understanding-test-results">Understanding Test Results</h2>
<h3 id="successful-test-run">Successful Test Run</h3>
<p>When all tests pass, you&#39;ll see output like:</p>
<pre><code>PASS  tdd/assignment1<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.js</span>
  Week <span class="hljs-number">1</span> Assignment Solution Tests
    âœ“ globals-demo<span class="hljs-selector-class">.js</span> outputs correct globals (<span class="hljs-number">245</span> ms)
    âœ“ async-demo<span class="hljs-selector-class">.js</span> demonstrates async patterns (<span class="hljs-number">312</span> ms)
    âœ“ core-modules-demo<span class="hljs-selector-class">.js</span> uses os, path, fs<span class="hljs-selector-class">.promises</span>, and streams (<span class="hljs-number">278</span> ms)

Test Suites: <span class="hljs-number">1</span> passed, <span class="hljs-number">1</span> total
Tests:       <span class="hljs-number">3</span> passed, <span class="hljs-number">3</span> total
</code></pre><h3 id="failed-test-run">Failed Test Run</h3>
<p>When tests fail, you&#39;ll see detailed error messages:</p>
<pre><code>FAIL  tdd/assignment1<span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.js</span>
  Week <span class="hljs-number">1</span> Assignment Solution Tests
    âœ• globals-demo<span class="hljs-selector-class">.js</span> outputs correct globals (<span class="hljs-number">123</span> ms)

    Expected: contain <span class="hljs-string">"__dirname: /path/to/assignment1"</span>
    Received: <span class="hljs-string">"__dirname: /wrong/path"</span>

    Difference: Expected substring: <span class="hljs-string">"__dirname: /path/to/assignment1"</span>
</code></pre><p><strong>What to do when tests fail:</strong></p>
<ol>
<li><strong>Read the error message carefully</strong> - It tells you exactly what was expected vs. what was received</li>
<li><strong>Check file paths</strong> - Ensure your files are in the correct directory</li>
<li><strong>Verify output formatting</strong> - Tests are sensitive to exact spacing, capitalization, and punctuation</li>
<li><strong>Check console.log statements</strong> - Make sure your output matches the expected format exactly</li>
</ol>
<hr>
<h2 id="how-to-read-tdd-test-files">How to Read TDD Test Files</h2>
<p>The TDD test files are located in the <code>tdd/</code> folder. Let&#39;s learn how to read and understand them.</p>
<h3 id="test-file-structure">Test File Structure</h3>
<p>TDD test files use <strong>Jest</strong> testing framework. Here&#39;s the basic structure:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-keyword">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-keyword">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { execSync } = <span class="hljs-keyword">require</span>(<span class="hljs-string">'child_process'</span>);

describe(<span class="hljs-string">'Assignment X: Description'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> assignmentDir = path.join(__dirname, <span class="hljs-string">'../assignmentX'</span>);

  test(<span class="hljs-string">'Test description'</span>, () =&gt; {
    <span class="hljs-comment">// Test code here</span>
    expect(actualValue).toBe(expectedValue);
  });
});
</code></pre>
<h3 id="key-components">Key Components</h3>
<h4 id="1-imports-and-setup-">1. <strong>Imports and Setup</strong></h4>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { execSync } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>);
</code></pre>
<ul>
<li><code>path</code>: Used to construct file paths correctly across different operating systems</li>
<li><code>fs</code>: Used to check if files exist, read files, etc.</li>
<li><code>execSync</code>: Used to execute your scripts and capture their output</li>
</ul>
<h4 id="2-describe-blocks-">2. <strong>describe() Blocks</strong></h4>
<pre><code class="lang-javascript">describe(<span class="hljs-string">'Assignment 1: Node.js Fundamentals'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-regexp">//</span> Tests go here
});
</code></pre>
<ul>
<li>Groups related tests together</li>
<li>The string is a description of what this test suite is testing</li>
<li>Helps organize tests logically</li>
</ul>
<h4 id="3-test-or-it-blocks-">3. <strong>test() or it() Blocks</strong></h4>
<pre><code class="lang-javascript">test(<span class="hljs-string">'globals-demo.js outputs correct globals'</span>, <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  <span class="hljs-regexp">//</span> Test logic
});
</code></pre>
<ul>
<li>Each <code>test()</code> or <code>it()</code> block is a single test case</li>
<li>The string describes what this specific test is checking</li>
<li>Contains the actual test logic</li>
</ul>
<h4 id="4-expect-assertions-">4. <strong>expect() Assertions</strong></h4>
<pre><code class="lang-javascript"><span class="hljs-selector-tag">expect</span>(actualValue)<span class="hljs-selector-class">.toBe</span>(expectedValue);
<span class="hljs-selector-tag">expect</span>(output)<span class="hljs-selector-class">.toContain</span>(<span class="hljs-string">'expected string'</span>);
<span class="hljs-selector-tag">expect</span>(fileExists)<span class="hljs-selector-class">.toBe</span>(true);
</code></pre>
<ul>
<li><code>expect()</code> is used to make assertions about values</li>
<li><code>.toBe()</code> checks for exact equality</li>
<li><code>.toContain()</code> checks if a string contains a substring</li>
<li><code>.toBeTruthy()</code> / <code>.toBeFalsy()</code> check boolean values</li>
<li>Many other matchers are available (see Jest documentation)</li>
</ul>
<h3 id="example-reading-assignment1-test-js">Example: Reading assignment1.test.js</h3>
<p>Let&#39;s break down a real test:</p>
<pre><code class="lang-javascript">test('globals-demo.js outputs correct globals', () =&gt; {
  const scriptPath = path.join(<span class="hljs-name">assignmentDir</span>, 'globals-demo.js')<span class="hljs-comment">;</span>
  const output = execSync(`node ${scriptPath}`).toString()<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">output</span>).toContain(`__dirname: ${assignmentDir}`)<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">output</span>).toContain(`__filename: ${scriptPath}`)<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">output</span>).toMatch(<span class="hljs-name">/Process</span> ID<span class="hljs-symbol">:/</span>)<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">output</span>).toMatch(<span class="hljs-name">/Platform</span><span class="hljs-symbol">:/</span>)<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">output</span>).toMatch(<span class="hljs-name">/Custom</span> global variable: Hello, global!/)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p><strong>What this test does:</strong></p>
<ol>
<li><p><strong><code>const scriptPath = path.join(assignmentDir, &#39;globals-demo.js&#39;)</code></strong></p>
<ul>
<li>Constructs the full path to your <code>globals-demo.js</code> file</li>
</ul>
</li>
<li><p><strong><code>const output = execSync(</code>node ${scriptPath}<code>).toString()</code></strong></p>
<ul>
<li>Runs your script using Node.js</li>
<li>Captures all console output from the script</li>
<li>Converts it to a string</li>
</ul>
</li>
<li><p><strong><code>expect(output).toContain(...)</code></strong></p>
<ul>
<li>Checks that the output contains the expected strings</li>
<li>Tests that you logged <code>__dirname</code>, <code>__filename</code>, etc.</li>
<li>Uses regex patterns with <code>toMatch()</code> for flexible matching</li>
</ul>
</li>
</ol>
<p><strong>What you need to do:</strong></p>
<ul>
<li>Create <code>globals-demo.js</code> in the <code>assignment1</code> folder</li>
<li>Make sure it logs the exact strings the test expects</li>
<li>Pay attention to spacing and capitalization!</li>
</ul>
<h3 id="example-reading-assignment4-test-js">Example: Reading assignment4.test.js</h3>
<p>For controller tests (like Assignment 4), tests use <code>node-mocks-http</code>:</p>
<pre><code class="lang-javascript">const httpMocks = require(<span class="hljs-string">"node-mocks-http"</span>);

it(<span class="hljs-string">"You can register a user."</span>, async () =&gt; {
  const req = httpMocks.createRequest({
    method: <span class="hljs-string">"<span class="hljs-keyword">POST</span>"</span>,
    body: {
      email: <span class="hljs-string">"jim@sample.com"</span>,
      name: <span class="hljs-string">"Jim"</span>,
      password: <span class="hljs-string">"Pa$$word20"</span>,
    },
  });
  const res = httpMocks.createResponse();
  await register(req, res);
  expect(res.statusCode).toBe(<span class="hljs-number">201</span>);
});
</code></pre>
<p><strong>What this test does:</strong></p>
<ol>
<li><p><strong><code>httpMocks.createRequest()</code></strong></p>
<ul>
<li>Creates a mock HTTP request object</li>
<li>Simulates what Express would pass to your controller</li>
<li>Includes the request body, method, etc.</li>
</ul>
</li>
<li><p><strong><code>httpMocks.createResponse()</code></strong></p>
<ul>
<li>Creates a mock HTTP response object</li>
<li>Allows the test to inspect the response status code, body, etc.</li>
</ul>
</li>
<li><p><strong><code>await register(req, res)</code></strong></p>
<ul>
<li>Calls your actual controller function</li>
<li>Passes the mock request and response</li>
</ul>
</li>
<li><p><strong><code>expect(res.statusCode).toBe(201)</code></strong></p>
<ul>
<li>Checks that your controller set the status code to 201 (Created)</li>
<li>Verifies the controller behaves correctly</li>
</ul>
</li>
</ol>
<p><strong>What you need to do:</strong></p>
<ul>
<li>Implement the <code>register</code> function in your controller</li>
<li>Make sure it returns status code 201 for successful registration</li>
<li>Ensure it handles the request body correctly</li>
</ul>
<hr>
<h2 id="common-test-patterns">Common Test Patterns</h2>
<h3 id="pattern-1-file-existence-check">Pattern 1: File Existence Check</h3>
<pre><code class="lang-javascript">test('File should exist', () =&gt; {
  const filePath = path.join(<span class="hljs-name">assignmentDir</span>, 'myfile.js')<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">fs</span>.existsSync(<span class="hljs-name">filePath</span>)).toBe(<span class="hljs-name">true</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p><strong>What it checks</strong>: That you created the required file</p>
<h3 id="pattern-2-output-content-check">Pattern 2: Output Content Check</h3>
<pre><code class="lang-javascript">test('Script outputs correct content', () =&gt; {
  const output = execSync(`node ${scriptPath}`).toString()<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">output</span>).toContain('Expected output')<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">output</span>).toMatch(<span class="hljs-name">/regex</span> pattern/)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p><strong>What it checks</strong>: That your script produces the expected console output</p>
<h3 id="pattern-3-file-content-check">Pattern 3: File Content Check</h3>
<pre><code class="lang-javascript">test('File contains correct content', () =&gt; {
  const fileContent = fs.readFileSync(<span class="hljs-name">filePath</span>, 'utf8')<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">fileContent</span>).toContain('expected content')<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p><strong>What it checks</strong>: That files you create contain specific content</p>
<h3 id="pattern-4-http-endpoint-check">Pattern 4: HTTP Endpoint Check</h3>
<pre><code class="lang-javascript">test('GET /endpoint returns <span class="hljs-number">200</span>', async () =&gt; {
  const response = await http.get('http<span class="hljs-symbol">://localhost</span>:<span class="hljs-number">3000</span>/endpoint')<span class="hljs-comment">;</span>
  expect(<span class="hljs-name">response</span>.statusCode).toBe(<span class="hljs-number">200</span>)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p><strong>What it checks</strong>: That your API endpoints work correctly</p>
<hr>
<h2 id="troubleshooting-common-issues">Troubleshooting Common Issues</h2>
<h3 id="issue-1-cannot-find-module-or-file-does-not-exist-">Issue 1: &quot;Cannot find module&quot; or &quot;File does not exist&quot;</h3>
<p><strong>Problem</strong>: Test can&#39;t find your file</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check that you&#39;re working in the correct directory (e.g., <code>assignment1</code>, <code>assignment2</code>)</li>
<li>Verify file names match exactly (case-sensitive!)</li>
<li>Ensure files are in the correct location relative to your assignment folder</li>
</ul>
<h3 id="issue-2-expected-output-to-contain-x-but-received-y-">Issue 2: &quot;Expected output to contain &#39;X&#39; but received &#39;Y&#39;&quot;</h3>
<p><strong>Problem</strong>: Output format doesn&#39;t match</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check spacing - tests are very sensitive to exact formatting</li>
<li>Verify capitalization matches exactly</li>
<li>Make sure punctuation matches (colons, commas, etc.)</li>
<li>Compare your output character-by-character with the expected output</li>
</ul>
<h3 id="issue-3-test-timeout-or-tests-taking-too-long-">Issue 3: &quot;Test timeout&quot; or &quot;Tests taking too long&quot;</h3>
<p><strong>Problem</strong>: Your code might be hanging or taking too long</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check for infinite loops</li>
<li>Ensure async operations complete (use <code>await</code> or proper callbacks)</li>
<li>Verify database connections close properly</li>
<li>Check that servers shut down after tests</li>
</ul>
<h3 id="issue-4-status-code-expected-200-received-500-">Issue 4: &quot;Status code expected 200, received 500&quot;</h3>
<p><strong>Problem</strong>: Your endpoint is returning an error</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Check server console logs for error messages</li>
<li>Verify database connections are working</li>
<li>Ensure middleware is set up correctly</li>
<li>Check that validation is passing</li>
<li>Make sure required environment variables are set</li>
</ul>
<h3 id="issue-5-cannot-read-property-of-undefined-">Issue 5: &quot;Cannot read property of undefined&quot;</h3>
<p><strong>Problem</strong>: Code is trying to access properties that don&#39;t exist</p>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Add error handling for missing data</li>
<li>Verify request body parsing works correctly</li>
<li>Check that middleware is running before route handlers</li>
<li>Ensure database queries return expected data structure</li>
</ul>
<hr>
<h2 id="tips-for-success">Tips for Success</h2>
<ol>
<li><p><strong>Run tests frequently</strong>: Don&#39;t wait until the end! Run tests as you complete each task.</p>
</li>
<li><p><strong>Read the test file first</strong>: Before starting an assignment, read the corresponding test file to understand what&#39;s expected.</p>
</li>
<li><p><strong>Match formatting exactly</strong>: Pay attention to spacing, capitalization, and punctuation in console.log statements.</p>
</li>
<li><p><strong>Check error messages carefully</strong>: Jest provides detailed error messages - use them to understand what&#39;s wrong.</p>
</li>
<li><p><strong>Test incrementally</strong>: Complete one test at a time rather than trying to pass all tests at once.</p>
</li>
<li><p><strong>Use the sample answers</strong>: Check <code>mentor-guidebook/sample-answers/</code> for reference implementations (but try to solve it yourself first!).</p>
</li>
<li><p><strong>Ask for help</strong>: If tests consistently fail and you can&#39;t figure out why, ask your mentor or check the course discussions.</p>
</li>
</ol>
<hr>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li>After running TDD tests and seeing them pass, you know your assignment meets the requirements</li>
<li>Don&#39;t forget to commit your work frequently</li>
<li>Create a pull request when you&#39;re ready to submit</li>
<li>For Assignment 9, you&#39;ll learn to write your own tests similar to these!</li>
</ul>
<hr>
<h2 id="summary">Summary</h2>
<ul>
<li><strong>To run tests</strong>: <code>npm run tdd assignmentX</code> (or <code>npm run lesson9TDD</code> for Assignment 9)</li>
<li><strong>Test files are in</strong>: <code>tdd/</code> folder</li>
<li><strong>Tests use</strong>: Jest framework</li>
<li><strong>Key functions</strong>: <code>describe()</code>, <code>test()</code>, <code>expect()</code></li>
<li><strong>Read tests first</strong>: Understand what&#39;s expected before coding</li>
<li><strong>Format matters</strong>: Exact spacing and capitalization are required</li>
</ul>
<p>Happy testing! ðŸ§ª</p>
